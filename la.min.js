"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t():e.LayoutArchitect=t()}("undefined"!=typeof self?self:void 0,function(){return function(e,t,a){if(!e)throw new Error("Please provide a HTML element as first argument!");if(!t)throw new Error("Please provide a list of strings as a second argument!");var f,i=function(e){return document.createElement(e)},o=function(e,t,n){return e.setAttribute(t,n)},c=t.slice(),n=i("DIV"),r=[],s=a||null;function u(e){return{name:e,elements:[]}}function l(t,e,n,r){return e.map(function(e){var t=i("A");return o(t,"data-op",e[0]),o(t,"href","javascript:void(0);"),o(t,"class",e[2]),t.innerHTML=e[1],t.item=n,t.parent=r,t}).forEach(function(e){return t.appendChild(e)})}function m(){var n;return d((n=i("DIV"),c.forEach(function(e){var t=i("A");o(t,"href","javascript:void(0);"),o(t,"data-op","select"),t.item=e,t.innerHTML=e,n.appendChild(t)}),o(n,"class","la-selector"),n)),new Promise(function(n){f=function(e){var t=c.indexOf(e);-1<t&&c.splice(t,1),n(e)}})}function d(e){for(e=e||function t(n,e){var r=i("DIV");return o(r,"class","la-block"),0===n.elements.length?(r.innerHTML='<div class="la-name">'+n.name+"</div>",l(r,[["remove","X","la-remove"]],n,e)):(r.innerHTML='<div class="la-children" style="grid-template-'+("horizontal"===n.direction?"rows":"columns")+": repeat("+n.elements.length+', 1fr);"></div>',n.elements.forEach(function(e){return r.querySelector(".la-children").appendChild(t(e,n))})),l(r,[["vertical:left","","la-left"],["horizontal:top","","la-top"],["horizontal:bottom","","la-bottom"],["vertical:right","","la-right"]],n,e),r}(s);n.firstChild;)n.removeChild(n.firstChild);n.appendChild(e)}function p(){r.forEach(function(e){return e(s)})}function h(){m().then(function(e){s=u(e),d(),p()})}return o(n,"class","la"),n.addEventListener("click",function(e){var n,r,i,t=e.target.getAttribute("data-op"),o=e.target.item,l=e.target.parent;if(t&&o)if("remove"===t)!function(e,t){if(!e)return s=a||null,c.push(t.name);var n=e.elements.findIndex(function(e){return e===t});-1<n&&(e.elements.splice(n,1),1===e.elements.length&&(0<e.elements[0].elements.length?(e.direction=e.elements[0].direction,e.elements=e.elements[0].elements):(e.name=e.elements[0].name,e.elements=[],delete e.direction)),c.push(t.name))}(l,o),s?d():h(),p();else if("select"===t)f(o);else{if(0===c.length)return;t=t.split(":"),(n=o,r=t[0],i="right"===t[1]||"bottom"===t[1]?"after":"before",m().then(function(e){return u(e)}).then(function(e){if(0===n.elements.length)n.direction=r,n.elements="after"===i?[u(n.name),e]:[e,u(n.name)],delete n.name;else{if(n.direction!==r){var t={direction:n.direction,elements:n.elements};n.elements="after"===i?[t,e]:[e,t]}else"after"===i?n.elements.push(e):n.elements=[e].concat(n.elements);n.direction=r}})).then(function(){d(),p()})}}),h(),e.appendChild(n),{onChange:function(e){r.push(e),e(s)},change:function(e){s=e,d()}}}});