"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t():e.LayoutArchitect=t()}("undefined"!=typeof self?self:void 0,function(){return function(e,t,n){if(!e)throw new Error("Please provide a HTML element as first argument!");if(!t)throw new Error("Please provide a list of strings as a second argument!");var a,r=function(e){return document.createElement(e)},o=function(e,t,n){return e.setAttribute(t,n)},f=t.slice(),i=r("DIV"),l=[],c=n||null;function s(e){return{name:e,elements:[]}}function u(t,e,n,i){return e.map(function(e){var t=r("A");return o(t,"data-op",e[0]),o(t,"href","javascript:void(0);"),o(t,"class",e[2]),t.innerHTML=e[1],t.item=n,t.parent=i,t}).forEach(function(e){return t.appendChild(e)})}function d(){var n;return m((n=r("DIV"),f.forEach(function(e){var t=r("A");o(t,"href","javascript:void(0);"),o(t,"data-op","select"),t.item=e,t.innerHTML='<svg width="10" height="10" viewBox="0 0 1792 1792"><path d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"/></svg> '+e,n.appendChild(t)}),o(n,"class","la-selector"),n)),new Promise(function(n){a=function(e){var t=f.indexOf(e);-1<t&&f.splice(t,1),n(e)}})}function m(e){for(e=e||function t(n,e){var i=r("DIV");return o(i,"class","la-block"),0===n.elements.length?(i.innerHTML='<div class="la-name">'+n.name+"</div>",u(i,[["remove",'<svg width="14" height="14" viewBox="0 0 1792 1792"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg>',"la-remove"]],n,e)):(i.innerHTML='<div class="la-children" style="grid-template-'+("horizontal"===n.direction?"rows":"columns")+": repeat("+n.elements.length+', 1fr);"></div>',n.elements.forEach(function(e){return i.querySelector(".la-children").appendChild(t(e,n))})),u(i,[["vertical:left","","la-left"],["horizontal:top","","la-top"],["horizontal:bottom","","la-bottom"],["vertical:right","","la-right"]],n,e),i}(c);i.firstChild;)i.removeChild(i.firstChild);i.appendChild(e)}function h(){l.forEach(function(e){return e(c)})}function p(){d().then(function(e){c=s(e),m(),h()})}return o(i,"class","la"),i.addEventListener("click",function(e){var n,i,r,t=e.target.getAttribute("data-op"),o=e.target.item,l=e.target.parent;if(t&&o)if("remove"===t)!function(e,t){if(!e)return c=null,-1===f.indexOf(t.name)&&f.push(t.name);var n=e.elements.findIndex(function(e){return e===t});-1<n&&(e.elements.splice(n,1),1===e.elements.length&&(0<e.elements[0].elements.length?(e.direction=e.elements[0].direction,e.elements=e.elements[0].elements):(e.name=e.elements[0].name,e.elements=[],delete e.direction)),f.push(t.name))}(l,o),c?m():p(),h();else if("select"===t)a(o);else{if(0===f.length)return;t=t.split(":"),(n=o,i=t[0],r="right"===t[1]||"bottom"===t[1]?"after":"before",d().then(function(e){return s(e)}).then(function(e){if(0===n.elements.length)n.direction=i,n.elements="after"===r?[s(n.name),e]:[e,s(n.name)],delete n.name;else{if(n.direction!==i){var t={direction:n.direction,elements:n.elements};n.elements="after"===r?[t,e]:[e,t]}else"after"===r?n.elements.push(e):n.elements=[e].concat(n.elements);n.direction=i}})).then(function(){m(),h()})}}),c?m():p(),e.appendChild(i),{onChange:function(e){l.push(e),e(c)},change:function(e){c=e,m()}}}});